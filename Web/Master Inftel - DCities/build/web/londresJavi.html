<!DOCTYPE HTML>
<!--
	Big Picture by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Discover Cities</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/londres/jquery.min.js"></script>
		<script src="js/londres/jquery.poptrox.min.js"></script>
		<script src="js/londres/jquery.scrolly.min.js"></script>
		<script src="js/londres/jquery.scrollgress.min.js"></script>
		<script src="js/londres/skel.min.js"></script>
		<script src="js/londres/init.js"></script>
                
                <script src="js/malaga/showhoteles.js"></script>
                
                <script src=' https://www.gstatic.com/cv/js/sender/v1/cast_sender.js'></script>
		
                <!--<noscript>
			<link rel="stylesheet" href="css/londres/skel.css" />
			<link rel="stylesheet" href="css/londres/style.css" />
			<link rel="stylesheet" href="css/londres/style-wide.css" />
			<link rel="stylesheet" href="css/londres/style-normal.css" />
		</noscript>-->
                
                <!--carousel-->
                <!--<link rel="stylesheet" type="text/css" href="carousel/css/demo.css" />-->
                <link rel="stylesheet" type="text/css" href="carousel/css/style.css" />
                <link rel="stylesheet" type="text/css" href="carousel/css/custom.css" />
                <script type="text/javascript" src="carousel/js/modernizr.custom.79639.js"></script>
                <noscript>
                    <link rel="stylesheet" type="text/css" href="carousel/css/styleNoJS.css" />
                </noscript>
                
                <!--End carousel-->
                
                
                
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body>

		<!-- Header -->
			<header id="header">

				<!-- Logo -->
			        <h1 id="logo"><a href="index_1.html">Discover cities</a></h1>
				<a href="index_1.html"></a>
				<!-- Nav -->
					<nav id="nav">
						<ul>
                                                        <li><strong><a href="#intro">Malaga</a></strong></li>
							<li><a href="#one">Restaurantes</a></li>
							<li><a href="#two">Sitios de interes</a></li>
							<li><a href="#work">Hoteles</a></li>
							<li><a href="#contact">Mas</a></li>
						</ul>
					</nav>

			</header>
			
		<!-- Intro -->
			<section id="intro" class="main style1 dark fullscreen">
				<div class="content container small">
					<header>
						<h2>MÁLAGA</h2>
					</header>
					<p>Málaga es una ciudad española, capital de la provincia homónima la cual pertenece a la comunidad autónoma de Andalucía. Está situada en el extremo oeste del mar Mediterráneo y 
                                           en el sur de la península Ibérica, a unos 100 km al este del estrecho de Gibraltar.Fundada por los fenicios en el siglo VIII a. C., lo que la convierte en una de las ciudades más 
                                           antiguas de Europa, Málaga fue un municipio primero federado y luego de derecho latino del Imperio romano, y una próspera medina andalusí cuatro veces capital de su propio reino, 
                                           que fue incorporada a la Corona de Castilla en 1487. Málaga constituye en la actualidad un notable centro económico y cultural, y un importante nodo de comunicaciones en el litoral mediterráneo.</p>
					<footer>
						<a href="#one" class="button style2 down">More</a>
					</footer>
				</div>
			</section>
		
		<!-- One -->
			<section id="one" class="main style2 left dark">
                                
                            <center><h2 id="titulotwo">Restaurantes</h2><center>
                                
                                <select id="select1" data-toggle="dropdown" onChange="seleccionar()">
                                </select>
                                
                                
                                <div class="restaurants" id="info">
                                   <!-- Carga información de Javascript-->
                                </div>
                            
                                <a href="#work" class="button style2 down anchored">Next</a>
                        </section>

			
		
		<!-- Two -->
			<section id="two" >
                            <!--Carousel-->
                            <div class="container demo-2" id="carousel">
                                
                           </div>
                            <!--Endcarousel-->
				<!--<a href="#work" class="button style2 down anchored">Next</a>-->
			</section>
			
		<!-- work -->
			<section id="work" class="main style3 primary">
                           <div class="content container" id="galeria">

                         <!-- script galeria-->
                          </div>
                      </section>
			
		<!-- contact -->
			<section id="contact" class="main style3 secondary">
				<div class="content container">
					<header>
						<h2>MAPA</h2>
						<p> </p>
					</header>
					<div>
					
                                            <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12792.404011774974!2d-4.421233924060741!3d36.720135420061155!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd7259c44fdb212d%3A0x6025dc92c9ca32cf!2zTcOhbGFnYQ!5e0!3m2!1ses!2ses!4v1414583191669" width="800" height="600" frameborder="0" style="border:0"></iframe>
                                          
					</div>
                                    
				</div>
                            
                               <div class="content container">
					<header>
                                            <br><br>
						<h2>VIDEO</h2>
						
					</header>
					<div >
                                            <br>
                                           <iframe width="800" height="600" src="//www.youtube.com/embed/9Na4yYZH2Hg" frameborder="0" allowfullscreen></iframe>
                                            <br><br><br>
                                        </div>
                                    
				</div>
			</section>
			
		<!-- Footer -->
			<footer id="footer">
                         <!-- Icons -->
            <ul class="actions">
                <li><a href="https://es.foursquare.com/explore?mode=url&near=Málaga" target ="blank" class="icon fa-foursquare"><span class="label">Foursquare</span></a></li>
                <li><a href="https://www.youtube.com/results?search_query=malaga" target="blank" class="icon fa-youtube"><span class="label">Youtube</span></a></li>
                <li>En esta Web se ha integrado Foursquare y se ha utilizado Youtube</li>
                
            </ul>
				
				<!-- Menu -->
					<ul class="menu">
						<li><a href="index_1.html">Discover Cities</a></li>
                                             
					</ul>
                               
			</footer>

                
                <!--Script Carousel -->
               
                <script type="text/javascript" src="carousel/js/jquery.ba-cond.min.js"></script>
                <script type="text/javascript" src="carousel/js/jquery.slitslider.js"></script>
                <script type="text/javascript">	
                   $(function() {
			
				var Page = (function() {

					var $nav = $( '#nav-dots > span' ),
						slitslider = $( '#slider' ).slitslider( {
							onBeforeChange : function( slide, pos ) {

								$nav.removeClass( 'nav-dot-current' );
								$nav.eq( pos ).addClass( 'nav-dot-current' );

							}
						} ),

						init = function() {

							initEvents();
							
						},
						initEvents = function() {

							$nav.each( function( i ) {
							
								$( this ).on( 'click', function( event ) {
									
									var $dot = $( this );
									
									if( !slitslider.isActive() ) {

										$nav.removeClass( 'nav-dot-current' );
										$dot.addClass( 'nav-dot-current' );
									
									}
									
									slitslider.jump( i + 1 );
									return false;
								
								} );
								
							} );

						};

						return { init : init };

				})();

				Page.init();

				/**
				 * Notes: 
				 * 
				 * example how to add items:
				 */

				
				
				//var $items  = $('<div class="sl-slide sl-slide-color-2" data-orientation="horizontal" data-slice1-rotation="-5" data-slice2-rotation="10" data-slice1-scale="2" data-slice2-scale="1"><div class="sl-slide-inner bg-1"><div class="sl-deco" data-icon="t"></div><h2>some text</h2><blockquote><p>bla bla</p><cite>Margi Clarke</cite></blockquote></div></div>');
				
				// call the plugin's add method
				//ss.add($items);

				
			
		});
	</script>
        
        
        
        
        
        
        <!-- Script for elemets of carousel-->
                <script type="text/javascript">
                    function Place(title,description,cite,image){
                        this.title = title;
                        this.description = description;
                        this.cite = cite;
                        this.image=image;
                    }
                    
                    //FOURSQUARE
                    function getPlacesOfFoursquare(){
                        var places = new Array();
                        var foursquare;
                        // token de usuario para foursquare
                        var token = "VLQ1RGHYTGEZ33SONEBB0520ISCYA2J0MPUZZ2X52H3K0JUB";
                        // latitud, longitud de la ciudad de Málaga
                        var latitud =41.005; //Londres 51.46 //Estambul 41.005 //Malaga 36.72
                        var longitud =28.9769; //-0.0091 // 28.9769 // -4.428
                        var numPlaces=5;

                            // Obtenemos los places del Json que devuelve FOURSQUARE
                            $.ajax({
                                url: "https://api.foursquare.com/v2/venues/explore?ll="+latitud+","+longitud+"&limit="+numPlaces+"&oauth_token="+token+"&v=20141027",
                                async: false,
                                dataType: 'json',
                                success: function(data) {
                                        foursquare = data.response;    
                                    }
                            });
                            // Fin de lectura del Json

                        var title;
                        var description;
                        var cite;
                        var p;
                        var idVenue;
                        var numImages = 3; // Representa el numero de imagenes que queremos obtener
                        var urlPhotos;
                        var foursquarePhotos;
                        var prefix;
                        var suffix;
                        var urlImage;
                        var size="original";
                        
                        
                        for (p in foursquare.groups[0].items){
                            title = foursquare.groups[0].items[p].venue.name;
                            description = foursquare.groups[0].items[p].tips[0].text; //Categoria del lugar: foursquare.groups[0].items[p].venue.categories[0].name;
                            cite = foursquare.groups[0].items[p].venue.rating;
                            
                            places[p]=new Object();
                            
                            places[p].title=title;
                            
                            if (description.length>300){
                                places[p].description=description.substring(0,300)+"...";
                            }else{
                                places[p].description=description;
                            }
                            
                            if (cite==null){
                                places[p].cite="";
                            }else{
                                places[p].cite="Nota: "+cite+"/10";
                            }
                            
                            // OBTENEMOS LA IMAGEN PARA DICHO LUGAR
                            
                            idVenue = foursquare.groups[0].items[p].venue.id; // id del sitio
                            urlPhotos = "https://api.foursquare.com/v2/venues/"+idVenue+"/photos?limit="+numImages+"&oauth_token="+token+"&v=20141028";

                            foursquarePhotos;
                            // Obtenemos las photos del Json que devuelve FOURSQUARE
                            $.ajax({
                                url: urlPhotos,
                                async: false,
                                dataType: 'json',
                                success: function(data) {
                                        foursquarePhotos = data.response;    
                                    }
                            });
                            
                            prefix = foursquarePhotos.photos.items[0].prefix;
                            suffix =  foursquarePhotos.photos.items[0].suffix;
                            urlImage = prefix+size+suffix;
                            
                            
                            places[p].image=urlImage;
                            
                            
                        }
                        
                        return places;
                        
                    }
                    //END FOURSQUARE
                    
                    function ShowPlaces(){
                        
                        var places = getPlacesOfFoursquare();
                        
                        
                        /* Obtenemos los places del Json
                        $.ajax({
                            url: "json/londres/placesJson.json",
                            async: false,
                            dataType: 'json',
                            success: function(data) {
                                    places = data.places;    
                                }
                        });
                        */// Fin de lectura del Json
                            
                        
                        var p;
                        
                        
                        var html='';
                        html += "<div id=\"slider\" class=\"sl-slider-wrapper\">" ;
                        html += "<div class=\"sl-slider\">";
                        
                        var cont=0;
                        for (p in places){
                             if (cont % 2 ==0){ // si es par será de una clase, si no de otra
                                 html += "<div class=\"sl-slide\" data-orientation=\"horizontal\" data-slice1-rotation=\"-25\" data-slice2-rotation=\"-25\" data-slice1-scale=\"2\" data-slice2-scale=\"2\">";
                             }else{
                                 html += "<div class=\"sl-slide\" data-orientation=\"vertical\" data-slice1-rotation=\"10\" data-slice2-rotation=\"-15\" data-slice1-scale=\"1.5\" data-slice2-scale=\"1.5\">";
                             }
                             cont++;
                             
                             //todo
                             html += "<div class=\"sl-slide-inner\">";
                             
                             
                             
                             html += "<div class=\"bg-img\" style=\"background-image: url("+places[p].image+")\"></div>";

                             
                             html += "<h2>"+places[p].title+"</h2>";
                             html += "<blockquote><p>"+places[p].description+"</p><cite>"+places[p].cite+"</cite></blockquote>";
                             
                             html += "</div>";
                             html += "</div>";
                        }
                        
                        html += "</div><!-- /sl-slider -->";
                        
                        //dots
                        if (places.length>0){
                            html += "<nav id=\"nav-dots\" class=\"nav-dots\">";
                            html += "<span class=\"nav-dot-current\"></span>";
                            for (i=1;i<places.length;i++){
                                html += "<span></span>";
                            }
                            html += "</nav>";
                        }
                        
                        html += "</div><!-- /slider-wrapper -->"  ;
                        
                        //var node = document.getElementById("carousel");
                        //node.innerHTML = html;
                        $('#carousel').html(html);
                        
                        
                       
                    }
                    
                    
                     ShowPlaces();
                     
                     
                </script>
                <!--vEnd Script for elemets of carousel-->
                
                
                
                
                
                <script type="text/javascript">

                 
                 showhotels();
                 </script>
               
                
                
               
                
                
                
            <script type="text/javascript">
                function Restaurant(name,type,place,photo,text,link){
                    this.name = name;
                    this.type = type;
                    this.place = place;
                    this.photo = photo;
                    this.text = text;
                    this.link = link;
                }
                
                function Filtro(restaurants,tipo){
                    var x=0;
                    var rest = new Array();
                    for (x in restaurants)
                    {
                        if (restaurants[x].type == tipo)
                        {
                            rest.push(restaurants[x]);
                        }             
                    }
                    return rest;
                }
                
                function Tipos (arr){
                    
                    var i,
                    len=arr.length,
                    out=[],
                    obj={};

                    for (i=0;i<len;i++) {
                       obj[arr[i]]=0;
                    }
                    for (i in obj) {
                       out.push(i);
                    }
                    return out;
                }               
                
                var rest = new Array();
                
                $.ajax({ 
                        url: "json/londres/restaurantes.json", 
                        async: false, dataType: 'json', 
                        success: function(data) { 
                        rest = data.restaurants; } 
                }); 
                
                // <--  Cargar info botón desplegable -->
                

                function ShowRestaurant(tipo){
 
                    var rest = new Array();
                    
                    $.ajax({ 
                        url: "json/londres/restaurantes.json", 
                        async: false, dataType: 'json', 
                        success: function(data) { 
                        rest = data.restaurants; } 
                    }); 

                    // <--  Filtrar restaurantes según botón desplegable -->
                        
                    if(tipo != "Todo"){
                        rest = Filtro(rest,tipo);
                    }
                    
                    var res = new Array();

                    for (i=0;i<3;i++){
                        var name = rest[i].name;
                        var type = rest[i].type;
                        var place = rest[i].place;
                        var photo = rest[i].photo;
                        var text = rest[i].text;
                        var link = rest[i].link;
                        res[i] = new Restaurant(name,type,place,photo,text,link);
                    }

                    var html='';

                    var r;

                    for (r in res){

                        html += "<div class=\"restaurantclass\">";
                        html += "<center><p id=\"titulo\">"+res[r].name+"</p></center>";
                        html += "<center> <img src='"+res[r].photo+"' alt='Foto "+res[r].name+"' width=\"180\" height=\"120\" style=\"border:3px solid black\"> </center>";
                        html += "<span class=\"titles\">Tipo: </span><span class=\"info\">"+res[r].type+"</span><br>";
                        // html += "<span class=\"titles\">Lugar: </span><span class=\"info\">"+res[r].place+"</span><br>";
                        if(res[r].text.length>125){
                            var nuevo = res[r].text.substring(0,122);
                            nuevo = nuevo.concat(" ...");
                            res[r].text = nuevo;

                        }
                        html += "<span class=\"titles\">Descripción: </span><span class=\"info\">"+res[r].text+"</span><br>";
                        html += "<span class=\"titles\">Enlace: </span><span class=\"info\"><a href="+res[r].link+" target=\"_blank\" id=\"enlace\">Sitio Web</a></span><br>";
                        html += "</div>";

                    }

                    $('#info').html(html);

                }
            
            
            var tipo = "Todo";
            
            ShowRestaurant(tipo);
            
            function LoadTypes(){
                    
                    var tip = new Array();
                        
                    for (i in rest) {
                        tip.push(rest[i].type);
                    }

                    var tips = new Array();
                    tips = Tipos (tip);

                    var opciones='';
                    opciones += "<option>Todo</option>";
                    
                    for(i in tips){
                        opciones += "<option>"+tips[i]+"</option>";
                    }

                    $('#select1').html(opciones);
                }
                
                LoadTypes();
            
            
            
            function seleccionar(){

                ShowRestaurant($('#select1').val());

            }
            
            
            
        </script>

                
	</body>
</html>
